@model IEnumerable<GoogleDriveAPI.Models.GoogleDriveFiles>
@{
    ViewBag.Title = "Google Drive API  - ASP.NET MVC 5 ";
}
<h2 class="imagetable">Google Drive API  - [Root Directory]</h2>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<style type="text/css">
    table.imagetable {
        font-family: verdana,arial,sans-serif;
        font-size: 11px;
        color: #333333;
        border-width: 1px;
        border-color: #999999;
        border-collapse: collapse;
    }

        table.imagetable th {
            background: #b5cfd2 url('cell-blue.jpg');
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #999999;
        }

        table.imagetable td {
            /*background: #dcddc0 url('cell-grey.jpg');*/
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #999999;
        }
</style>

<center>
    <div style="width:100%;">
        <table class="imagetable">
            <tr>
                <td>
                    @using (Html.BeginForm("CreateFolder", "Home", FormMethod.Post))
                    {
                        <p>
                            Folder Name :<input type="text" name="FolderName" id="txtFolderName" style="align-content:center" />
                            <input type="submit" class="CreateFolder" value="Create Folder" style="align-content:center" />
                        </p>
                    }
                </td>
                <td>
                    @using (Html.BeginForm("UploadFile", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                        <label>File Upload in Root :</label>
                        <input type="file" name="file" id="file" style="width:176px;" />
                        <input type="submit" value="Upload" />
                    }
                </td>
            </tr>
        </table>
    </div>

    <br />

    <table class="imagetable">
        <tr id="header">
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                Type
            </th>
            <th>
                Created Time
            </th>
            <th>
                Upload
            </th>
            <th>
                Delete
            </th>
        </tr>

        @if (Model.Count() > 0)
        {
            foreach (var item in Model)
            {
 
                if (item.Parents[0] == "0AKxCjxiMcOBxUk9PVA")
                {
    <tr>
        @{
            string FileSize = string.Empty;
            string Type = string.Empty;
            if (@item.Size != null)
            {
                long? KiloByte = @item.Size;
                FileSize = KiloByte + " bytes";
            }
        }
        <td>
            @if (@item.Size == null)
            {
                <a href="@Url.Action("GetContainsInFolder", "Home", new { folderId = item.Id })">@item.Name</a>
            }
            else
            { @item.Name}
        </td>
        <td>
            @{
                if (FileSize == string.Empty) { Type = "Folder"; }
                else { Type = "File"; }
            }
            @Type
        </td>
        <td>
            @string.Format("{0: MM/dd/yyyy}", Convert.ToDateTime(Html.DisplayFor(modelItem => item.CreatedTime).ToString()))
        </td>

        <td>
            @if (FileSize == string.Empty)
            {
                using (Html.BeginForm("FileUploadInFolder", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <input type="hidden" name=Id value="@item.Id">
                    <input type="file" name="file" id="file" style="width:176px;" />
                    <input type="submit" value="Upload" />
                }
            }
        </td>
        <td>
            @using (Html.BeginForm("DeleteFile", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <input type="hidden" name=Id value="@item.Id">
                <input type="submit" class="DeleteFile" value="Delete" style="align-content:center" />
            }

        </td>
    </tr>
                }
            }
        }
        else
        {
            <tr> <td colspan="6">No Records found</td> </tr>
        }
    </table>
</center>

<script>
    $(document).on('click', '.DownloadFile', function () {
        debugger;
        var fileId = $(this).attr("data-key");
        window.location.href = '/Home/DownloadFile/' + fileId;
    });
</script>